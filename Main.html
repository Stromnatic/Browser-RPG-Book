<html>
<head>
	<script>
	<!--
	var max_elet, elet;
	var max_tamadas, tamadas;
	var max_vedettseg, vedettseg;
	var max_szerencse, szerencse;
	var max_magia=0, magia=0;
	var max_sebzes=2, min_sebzes=1;
	var max_sebzes_e, min_sebzes_e;
	var ellenfel_nev, ellenfel_eletero, ellenfel_vedettseg, ellenfel_tamadas;
	var	max_jatekos = max_sebzes - min_sebzes + 1; //2 sebzés közötti különbség, randomolásnál kell
	var	max_ellenfel;
	var repeater;
	var kezdes;
	
	function Max_Eletero(){
		max_elet=Math.floor((Math.random()*21)+14);
		elet=max_elet;
		document.getElementById("eletero_kezdeti").innerHTML="Életerő: "+max_elet;
		document.getElementById("eletero_valtozott").innerHTML="Életerő: "+max_elet;
	}
	function Max_Tamadas(){
		max_tamadas=Math.floor((Math.random()*11)+8);
		tamadas=max_tamadas;
		document.getElementById("tamadas_kezdeti").innerHTML="Támadás: "+max_tamadas;
		document.getElementById("tamadas_valtozott").innerHTML="Támadás: "+max_tamadas;
	}
	function Max_Vedettseg(){
		max_vedettseg=Math.floor((Math.random()*11)+8);
		vedettseg=max_vedettseg;
		document.getElementById("vedettseg_kezdeti").innerHTML="Védettség: "+max_vedettseg;
		document.getElementById("vedettseg_valtozott").innerHTML="Védettség: "+max_vedettseg;
	}
	function Max_Szerencse(){
		max_szerencse=Math.floor((Math.random()*6)+7);
		szerencse=max_szerencse;
		document.getElementById("szerencse_kezdeti").innerHTML="Szerencse: "+max_szerencse;
		document.getElementById("szerencse_valtozott").innerHTML="Szerencse: "+max_szerencse;
	}
	function Max_Magia(){
		document.getElementById("magia_kezdeti").innerHTML="Mágia: "+ max_magia;
		document.getElementById("magia_valtozott").innerHTML="Mágia: "+max_magia;
	}
	function Feltoltes(){
	Max_Eletero();
	Max_Tamadas();
	Max_Vedettseg();
	Max_Szerencse();
	Max_Magia();
	}
	
	function Kuzdelem(){
		//ki kezdjen?
		jatekos = Math.floor((Math.random()*6)+1);
		ellenfel = Math.floor((Math.random()*6)+1);
		
		if(jatekos < ellenfel){
			//ellenfel kezd
			kezdes=false;
			document.getElementById("kezdes").innerHTML="Ellenfél kezd";
			repeater = setInterval(function(){ Harc(); },1000);
		}
		else{				  
			//jatekos kezd
			kezdes=true;
			document.getElementById("kezdes").innerHTML="Jatekos kezd";
			repeater = setInterval(function(){ Harc(); },1000);
		}
	}
	
	function Harc(){
	
			document.getElementById("csata_elet").innerHTML="Életerőd: "+elet;
			document.getElementById("csata_elet_e").innerHTML=ellenfel_nev+" életerereje: "+ellenfel_eletero;
		
			if(kezdes){		//jatekos tamad
				document.getElementById("csata_kiteres").innerHTML="";
				tamadoero = Math.floor((Math.random()*11)+2);
				tamadoero += tamadas;
				if(tamadoero > ellenfel_vedettseg){ //megsebezve
					sebzes = Math.floor((Math.random()* max_jatekos)+min_sebzes);
					ellenfel_eletero -= sebzes;
					document.getElementById("csata_kiteres_e").innerHTML="-"+sebzes;
					document.getElementById("csata_elet_e").innerHTML= ellenfel_nev+" életerereje: "+ellenfel_eletero;
					if(ellenfel_eletero <= 0){ 
					clearInterval(repeater);
					document.getElementById("eredmeny").innerHTML="Jatekos nyert";
					//nyert
					}
				}
				else{ 
				//elkerülte a támadást 
				document.getElementById("csata_kiteres_e").innerHTML="Elkerülte a Támadást!";
				}
				kezdes=false;
			}
			else{ 			//ellenfel tamad
				document.getElementById("csata_kiteres_e").innerHTML="";
				tamadoero = Math.floor((Math.random()*11)+2);
				tamadoero += ellenfel_tamadas;
				if(tamadoero > vedettseg){ //megsebezve
					sebzes = Math.floor((Math.random()* max_ellenfel)+min_sebzes_e);
					elet -= sebzes;
					document.getElementById("csata_kiteres").innerHTML="-"+sebzes;
					document.getElementById("csata_elet").innerHTML="Életerőd: "+elet;
					if(elet <= 0){ 
					clearInterval(repeater);
					document.getElementById("eredmeny").innerHTML="Jatekos vesztett";
					//vesztett 
					}
				}
				else{ 
				//elkerülte a támadást
				document.getElementById("csata_kiteres").innerHTML="Elkerülte a Támadást!";
				}
				kezdes=true;
			}
	}
	
	function Csata(ellenfel_nev,ellenfel_eletero,ellenfel_tamadas,ellenfel_vedettseg,max_sebzes_e,min_sebzes_e){
		this.ellenfel_nev = ellenfel_nev;
		this.ellenfel_eletero = ellenfel_eletero;
		this.ellenfel_tamadas = ellenfel_tamadas;
		this.ellenfel_vedettseg = ellenfel_vedettseg;
		this.max_sebzes_e = max_sebzes_e;
		this.min_sebzes_e = min_sebzes_e;
		max_ellenfel = max_sebzes_e - min_sebzes_e + 1;
		Kuzdelem();
	}
	function Ellenfelek(szam){
		switch(szam){
			case 1: Csata("Kőszobor",30,8,13,12,2); break;
			case 2: Csata("Kecskepásztor",20,10,10,6,1); break;
			case 3: Csata("Farkasember",25,14,10,6,1); break;
			case 4: Csata("Sámán",29,14,16,12,2); break;
			case 5: Csata("Kapuőrző Démon",80,18,20,10,5); break;
			case 6: Csata("Rémkutya",10,10,9,6,1); break;
			case 7: Csata("Első Kígyó",28,18,16,12,2); break;
			case 8: Csata("Második Kígyó",32,18,16,12,2); break;
			case 9: Csata("Ajtó",13,8,11,3,1); break;
			case 10: Csata("Hószörny",36,12,10,8,3); break;
			case 11: Csata("Törpe",22,14,13,7,2); break;
			case 12: Csata("Törpe",25,14,13,7,2); break; //128.
			case 13: Csata("Rabló",13,11,10,6,1); break;
			case 14: Csata("Törpe",25,14,13,7,2); break; //146.
			case 15: Csata("Az alvilág őre",80,18,20,10,5); break; //149.
			case 16: Csata("Jégóriás",35,14,10,12,2); break; //151.
			case 17: Csata("Varázsló",11,8,6,0,0); break; //186.
			case 18: Csata("Harcos nő",20,13,10,8,3); break;
			case 19: Csata("Rabló",14,11,8,6,1); break; //208.
			case 20: Csata("Rabló",12,12,10,8,3); break; //214.
			case 21: Csata("Hószörny",36,12,10,7,2); break; //227.
			case 22: Csata("Sivatagi szellem",30,12,18,4,4); break; //260.
			case 23: Csata("Rukh fióka",12,10,7,6,1); break; //286.
			
			default: break;
		}
	}
	-->
	</script>
</head>
<body>
<table width="100%" align="center">
<tr><td>
	<div id="eletero_kezdeti"></div>
</td><td>
	<div id="tamadas_kezdeti"></div>
</td><td>
	<div id="vedettseg_kezdeti"></div>
</td><td>
	<div id="szerencse_kezdeti"></div>
</td><td>
	<div id="magia_kezdeti"></div>
</td></tr>

<tr><td>
	<div id="eletero_valtozott"></div>
</td><td>
	<div id="tamadas_valtozott"></div>
</td><td>
	<div id="vedettseg_valtozott"></div>
</td><td>
	<div id="szerencse_valtozott"></div>
</td><td>
	<div id="magia_valtozott"></div>
</td></tr>
</table>
<button onclick="Feltoltes()">Feltoltes</button>

<table align="center">
	<tr><td colspan="2">
	<center><div id="kezdes"></div></center>
	</td></tr>
	<tr><td width="200">
	<center><div id="csata_elet"></div></center>
	</td><td width="200">
	<center><div id="csata_kiteres"></div></center>
	</td></tr>
	<tr><td width="200">
	<center><div id="csata_elet_e"></div></center>
	</td><td width="200">
	<center><div id="csata_kiteres_e"></div></center>
	</td></tr>
	<tr><td colspan="2">
	<center><div id="eredmeny"></div></center>
	</td></tr>
</table>
<button onclick="Ellenfelek(23)">Harc_próba</button>
<div></div>

</body>
</html>